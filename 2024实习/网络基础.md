
## ARP协议

地址解析协议，即ARP（Address Resolution Protocol），是根据ip地址获取物理地址的一个TCP/IP协议

**工作过程：**
1.发送arp请求的以太网数据帧广播到以太网上的每个主机，arp请求证包含了目的主机的IP地址
2.目的主机收到该arp请求后，会发送一个aro应答，里面包含了目的主机的MAC地址

**ARP协议工作原理：**
每个主机都会在自己的arp缓冲区建立一个arp列表，表示ip地址和MAC地址之间的对应关系。
主机（网络接口）新加入网络时（可能是MAC地址发生变化或者网络接口重启）会发送arp报文将自己的ip地址和MAC地址的映射关系广播给其他主机。

>发送arp数据包：
某个主机要发送报文时，首先会检测arp列表中是否有对应的ip地址与主机的MAC地址，如果有，则直接发送数据，如果没有会更新自己的arp缓冲区，将新的映射关系加入到arp列表中。

>收到arp数据包
（1）首先检查arp数据包中的ip地址是否是自己的ip地址，如果不是则直接忽略
（2）如果是自己的ip地址，则将源主机的ip和MAc地址写入自己的arp列表中，如果存在则覆盖
（3）将自己的MAC地址写入arp响应包中

源主机收到目标机的arp响应后，将目标机的ip地址与MAC地址写入arp列表，并利用此信息去发送数据。
如果源主机一直没有收到arp响应数据包，表示arp查询失败。
arp高速缓存（即arp列表）时arp协议能够高速运行的关键。

## RARP

反向地址转换协议，网络层协议。
与ARP工作方式相反，
RARP使只知道自己硬件的主机能够知道其IP地址。RARP发出要反向解释的物理地址并希望返回其IP地址，应答包括能够提供所需信息的RARP服务器发出的IP地址。

原理：
（1）主机从网卡上读取mac地址，然后在网络上发送一个RARP请求的广播数据包，请求RARP服务器回复该主机的ip地址
（2）RARP服务器收到改RARP的请求数据包，为他分配IP地址，并将RARP回应发送给主机
（3）PC收到RARP回应后，就用得到的IP地址进行通信

## DNS

将主机域名转换为 ip 地址，属于应用层协议，使用 UDP 传输。

一、主机向本地域名服务器的查询一般是采用递归查询
二、本地域名服务器向根域名服务器的查询是迭代查询

（1）当用户输入域名是，浏览器先检查自己的缓存中是否有这个域名的ip地址，有解析则结束。
（2）若没命中，则请求操作系统缓存（如Windows的hosts文件）中有没有解析结果，有解析结束
（3）若没命中，则请求本地域名服务器解析
（4）若无命中